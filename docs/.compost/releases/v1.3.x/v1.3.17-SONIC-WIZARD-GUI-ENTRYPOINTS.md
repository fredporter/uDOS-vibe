# v1.3.17 Sonic Screwdriver: Wizard GUI Entry Points

Last updated: 2026-02-15
Target: Wizard web dashboard + API-backed operations

## Objective

Expose Sonic Screwdriver lifecycle through clear Wizard GUI entry points that map 1:1 to API operations and CLI equivalents.

## Source Policy

- Sonic implementation is consumed from public submodule `/uDOS-sonic/`.
- GUI build/version panels should display both:
  - uDOS repo commit
  - `/uDOS-sonic/` submodule commit

## Entry Point Map

### 1) Settings -> Integrations -> Sonic

Purpose:
- Discovery/configuration hub for Sonic capability state.

UI blocks:
- Sonic status card (installed/enabled/health/device-db)
- Quick actions: `Install`, `Enable`, `Disable`, `Sync DB`, `Open Logs`
- Capability summary: USB builder availability, platform target support

API bindings:
- `GET /api/platform/sonic/status` (or existing Sonic health/status route)
- `POST /api/library/integration/sonic/install`
- `POST /api/library/integration/sonic/enable`
- `POST /api/library/integration/sonic/disable`
- `POST /api/sonic/sync`

CLI parity:
- `PLUGIN install sonic-screwdriver`
- `PLUGIN enable sonic-screwdriver`
- `SONIC STATUS`
- `SONIC SYNC`

### 2) Library -> Integrations -> Sonic Card

Purpose:
- Catalog-first install/upgrade management.

UI blocks:
- Sonic integration card with version + manifest validation badge
- Submodule pin badge (`uDOS-sonic@<sha>`)
- Actions: `Install`, `Enable`, `Disable`, `Uninstall`, `Details`
- Validation panel: compatibility (`core_min`, `wizard_min`), manifest state

API bindings:
- `GET /api/library`
- `GET /api/library/integration/sonic`
- `POST /api/library/integration/sonic/install`
- `POST /api/library/integration/sonic/enable`
- `POST /api/library/integration/sonic/disable`
- `DELETE /api/library/integration/sonic`

### 3) Platform -> Sonic Device Center

Purpose:
- Operational dashboard for Sonic device database and media targets.

UI blocks:
- Device DB health/state
- Last sync timestamp + row counts
- Actions: `Rescan`, `Rebuild DB`, `Export Device Matrix`
- Submodule status display (`initialized`, `pinned`, `dirty/clean`)

API bindings:
- `GET /api/sonic/health`
- `GET /api/sonic/devices`
- `POST /api/sonic/rescan`
- `POST /api/sonic/rebuild`
- `GET /api/sonic/export`
- `GET /api/sonic/db/status`
- `POST /api/sonic/db/rebuild`
- `GET /api/sonic/db/export`

### 4) Build -> Sonic Stick Builder (New section)

Purpose:
- Build and verify standalone Sonic Stick artifacts.

UI blocks:
- Build profile selector (`alpine-core`, `alpine-core+sonic`)
- Source image/target config fields
- Action: `Build Sonic Stick`
- Artifacts table: iso/img/checksum/manifest
- Build metadata panel including `/uDOS-sonic/` commit SHA used in build

API bindings:
- `POST /api/platform/sonic/build`
- `GET /api/platform/sonic/builds`
- `GET /api/platform/sonic/builds/{id}`
- `GET /api/platform/sonic/builds/{id}/artifacts`

Backend script hook:
- `distribution/alpine-core/build-sonic-stick.sh`

## UX Flow Requirements

1. Entry points must always show status first (read-only) before destructive actions.
2. Buttons must disable while in-flight and show operation logs.
3. Errors must include actionable next step (`install wizard deps`, `enable integration`, `run sync`).
4. All actions should be idempotent where possible (`install` on installed should no-op).

## Navigation Placement (Wizard)

- Primary nav:
  - `Config` -> `Sonic` section (status/config)
  - `Library` -> Sonic integration card
  - `Platform` -> Sonic device center
- Secondary nav:
  - `Build` -> Sonic Stick builder

## Permissions

- Read actions: admin + operator roles.
- Mutating actions (install/enable/disable/rebuild/build): admin only.
- Build actions must require explicit confirmation when writing images/devices.

## Telemetry and Auditing

Log per action:
- actor
- timestamp
- action
- target
- result
- duration
- artifact ids (for build jobs)

Suggested log files:
- `memory/logs/sonic-actions.log`
- `memory/logs/sonic-builds.log`

## Acceptance Criteria

- Sonic appears in all 4 entry points and reflects consistent state.
- GUI actions produce same backend effects as CLI/API direct calls.
- Build screen can start a job and show artifacts with checksums.
- Failed operations present explicit remediation guidance.

## Implementation Order

1. Settings + Library entry points (fastest user impact).
2. Platform device center (operational visibility).
3. Build section (Sonic Stick pipeline UX).
4. Telemetry + permission hardening.
