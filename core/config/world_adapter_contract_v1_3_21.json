{
  "version": "1.3.21",
  "status": "canonical",
  "principle": "uDOS is system-of-record; engines/adapters render and emit events only",
  "identity": {
    "place_ref": {
      "pattern": "^[A-Z0-9:_]+:[A-Z0-9]+:L[0-9]{3}-[A-Z]{2}[0-9]{2}(?:-Z-?[0-9]{1,2})?(?::[A-Z0-9-]+)?$",
      "examples": [
        "EARTH:SUR:L305-DA11",
        "EARTH:UDN:L306-AA10-Z2",
        "EARTH:SUB:L340-AA22-Z-3:D4"
      ]
    },
    "chunk2d": {
      "format": "<anchor>-<space>-<layer>-<col>",
      "example": "earth-sur-305-da",
      "owner": "udos-core"
    }
  },
  "events": {
    "canonical_types": [
      "MAP_ENTER",
      "MAP_TRAVERSE",
      "MAP_INSPECT",
      "MAP_INTERACT",
      "MAP_COMPLETE",
      "MAP_TICK"
    ],
    "required_fields": ["ts", "source", "username", "type", "payload"],
    "required_payload_fields": {
      "MAP_ENTER": ["action", "place_id", "place_ref", "chunk2d_id", "location"],
      "MAP_TRAVERSE": ["action", "from_place_id", "to_place_id", "to_place_ref", "terrain_cost", "mode", "chunk2d_id", "location"],
      "MAP_INSPECT": ["action", "place_id", "place_ref", "location"],
      "MAP_INTERACT": ["action", "place_id", "place_ref", "interaction_id", "location"],
      "MAP_COMPLETE": ["action", "place_id", "place_ref", "objective_id", "location"],
      "MAP_TICK": ["action", "steps", "tick_counter", "npc_phase", "world_phase", "place_id", "place_ref", "location"]
    }
  },
  "permissions": {
    "map_runtime": "gameplay.mutate",
    "gate_admin": "gameplay.gate_admin",
    "toybox_profile_admin": "toybox.admin"
  },
  "ownership": {
    "identity": "udos",
    "quests": "udos",
    "permissions": "udos",
    "engine_save_state": "adapter"
  }
}
