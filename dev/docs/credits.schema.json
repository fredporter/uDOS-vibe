{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://udos.dev/schemas/credits.schema.json",
  "title": "uDOS Credits Schema",
  "description": "Schema for tracking library credits and dependencies in uDOS",
  "type": "object",
  "required": ["meta", "libraries"],
  "properties": {
    "meta": {
      "type": "object",
      "required": ["version", "last_updated"],
      "properties": {
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Schema version"
        },
        "last_updated": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "description": "Last update date (YYYY-MM-DD)"
        },
        "description": {
          "type": "string"
        }
      }
    },
    "libraries": {
      "type": "object",
      "description": "Libraries organized by category",
      "additionalProperties": {
        "type": "array",
        "items": {
          "$ref": "#/definitions/library"
        }
      }
    },
    "wizard_library": {
      "type": "array",
      "description": "Wizard-only libraries",
      "items": {
        "$ref": "#/definitions/library"
      }
    },
    "fonts": {
      "type": "object",
      "properties": {
        "system_fonts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/font"
          }
        },
        "custom_fonts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/font"
          }
        }
      }
    },
    "retro_influences": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/influence"
      }
    },
    "license_summary": {
      "type": "object",
      "description": "Libraries grouped by license type",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    }
  },
  "definitions": {
    "library": {
      "type": "object",
      "required": ["id", "name", "author", "license", "repository", "location"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$",
          "description": "Unique identifier"
        },
        "name": {
          "type": "string",
          "description": "Display name"
        },
        "author": {
          "type": "string",
          "description": "Author or organization"
        },
        "license": {
          "type": "string",
          "enum": ["MIT", "Apache-2.0", "GPL-3.0", "GPL-2.0", "BSD-3-Clause", "BSD-2-Clause", "NGPL", "ISC", "MPL-2.0", "LGPL-3.0", "Unlicense", "CC0-1.0"],
          "description": "SPDX license identifier"
        },
        "license_note": {
          "type": "string",
          "description": "Additional license context"
        },
        "repository": {
          "type": "string",
          "format": "uri",
          "description": "GitHub repository URL"
        },
        "original_repo": {
          "type": "string",
          "format": "uri",
          "description": "Original repository if forked"
        },
        "description": {
          "type": "string",
          "description": "Brief description"
        },
        "location": {
          "type": "string",
          "description": "Path relative to uDOS root"
        },
        "wizard_only": {
          "type": "boolean",
          "default": false,
          "description": "Requires Wizard Server (web access)"
        }
      }
    },
    "font": {
      "type": "object",
      "required": ["name", "purpose"],
      "properties": {
        "name": {
          "type": "string"
        },
        "purpose": {
          "type": "string"
        },
        "fallbacks": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "license": {
          "type": "string"
        },
        "source": {
          "type": "string",
          "format": "uri"
        }
      }
    },
    "influence": {
      "type": "object",
      "required": ["name", "era", "influence"],
      "properties": {
        "name": {
          "type": "string"
        },
        "era": {
          "type": "string"
        },
        "influence": {
          "type": "string"
        }
      }
    }
  }
}
